# =============================================================================
# NEPHROLOGY AI AGENT - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# 
# This file contains all the environment variables needed for production
# deployment of the Nephrology AI Agent Enterprise Edition.
# 
# SECURITY NOTICE:
# - Copy this file to .env.prod and fill in your actual values
# - Never commit .env.prod to version control
# - Use strong, unique passwords and keys
# - Rotate secrets regularly
# 
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# PostgreSQL Database Password (REQUIRED)
# Use a strong password with at least 16 characters, including uppercase,
# lowercase, numbers, and special characters
DB_PASSWORD=your_secure_database_password_here

# Database Connection Settings
DB_HOST=postgres
DB_PORT=5432
DB_NAME=nephro_db
DB_USER=nephro_user

# Full Database URL (auto-constructed, don't change unless using external DB)
DATABASE_URL=postgresql://nephro_user:${DB_PASSWORD}@postgres:5432/nephro_db

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------

# Redis Password (REQUIRED)
# Use a strong password for Redis authentication
REDIS_PASSWORD=your_secure_redis_password_here

# Redis Connection Settings
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Full Redis URL (auto-constructed)
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# -----------------------------------------------------------------------------
# API KEYS AND EXTERNAL SERVICES
# -----------------------------------------------------------------------------

# Google Gemini API Key (REQUIRED)
# Get your API key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# OpenAI API Key (OPTIONAL - for future integrations)
# OPENAI_API_KEY=your_openai_api_key_here

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------------------

# JWT Secret Key (REQUIRED)
# Generate with: openssl rand -hex 32
# Must be at least 32 characters long
SECRET_KEY=your_jwt_secret_key_32_characters_minimum_here

# Encryption Key (REQUIRED)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your_fernet_encryption_key_here

# JWT Token Expiration (hours)
TOKEN_EXPIRE_HOURS=24

# Session Configuration
SESSION_TIMEOUT_MINUTES=60
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# CORS Configuration
CORS_ORIGINS=https://nephro.yourdomain.com,https://api.nephro.yourdomain.com,https://dashboard.nephro.yourdomain.com
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# RATE LIMITING AND SECURITY
# -----------------------------------------------------------------------------

# API Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CSRF_PROTECTION=true
ENABLE_XSS_PROTECTION=true

# IP Whitelisting (comma-separated, leave empty to disable)
# ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8
ALLOWED_IPS=

# -----------------------------------------------------------------------------
# MONITORING AND LOGGING
# -----------------------------------------------------------------------------

# Grafana Admin Password (REQUIRED)
# Use a strong password for Grafana admin access
GRAFANA_PASSWORD=your_grafana_admin_password_here

# Prometheus Configuration
PROMETHEUS_RETENTION_DAYS=30
PROMETHEUS_SCRAPE_INTERVAL=15s

# Logging Configuration
LOG_LEVEL=INFO
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_SECURITY_LOGGING=true

# Log Retention (days)
LOG_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# -----------------------------------------------------------------------------

# Environment
ENVIRONMENT=production
DEBUG=false

# Application URLs
APP_URL=https://nephro.yourdomain.com
API_URL=https://api.nephro.yourdomain.com
DASHBOARD_URL=https://dashboard.nephro.yourdomain.com

# Application Ports (internal)
APP_PORT=8503
API_PORT=8003
DASHBOARD_PORT=8504

# -----------------------------------------------------------------------------
# PERFORMANCE CONFIGURATION
# -----------------------------------------------------------------------------

# Caching
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=512
ENABLE_QUERY_CACHE=true
ENABLE_RESPONSE_CACHE=true

# Database Connection Pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Worker Configuration
WORKER_PROCESSES=4
WORKER_THREADS=2
WORKER_TIMEOUT=300

# -----------------------------------------------------------------------------
# BACKUP CONFIGURATION
# -----------------------------------------------------------------------------

# Backup Settings
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Backup Storage (local or cloud)
BACKUP_STORAGE_TYPE=local
# For cloud storage (AWS S3, Google Cloud, Azure)
# BACKUP_STORAGE_TYPE=s3
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_S3_BUCKET=your-backup-bucket
# AWS_REGION=us-east-1

# -----------------------------------------------------------------------------
# SSL/TLS CONFIGURATION
# -----------------------------------------------------------------------------

# SSL Certificate Paths (for custom certificates)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# Let's Encrypt Configuration
LETSENCRYPT_EMAIL=admin@yourdomain.com
LETSENCRYPT_DOMAINS=nephro.yourdomain.com,api.nephro.yourdomain.com,dashboard.nephro.yourdomain.com

# -----------------------------------------------------------------------------
# COMPLIANCE AND PRIVACY
# -----------------------------------------------------------------------------

# HIPAA Compliance
ENABLE_HIPAA_COMPLIANCE=true
ENABLE_DATA_ENCRYPTION=true
ENABLE_AUDIT_TRAIL=true

# Data Retention Policies
PATIENT_DATA_RETENTION_DAYS=2555  # 7 years
SESSION_DATA_RETENTION_DAYS=365   # 1 year
LOG_DATA_RETENTION_DAYS=90        # 3 months

# Privacy Settings
ENABLE_DATA_ANONYMIZATION=true
ENABLE_CONSENT_MANAGEMENT=true
ENABLE_RIGHT_TO_ERASURE=true

# -----------------------------------------------------------------------------
# NOTIFICATION CONFIGURATION
# -----------------------------------------------------------------------------

# Email Configuration (for alerts and notifications)
# SMTP_HOST=smtp.yourdomain.com
# SMTP_PORT=587
# SMTP_USERNAME=alerts@yourdomain.com
# SMTP_PASSWORD=your_smtp_password
# SMTP_USE_TLS=true
# SMTP_FROM_EMAIL=noreply@yourdomain.com

# Alert Recipients
# ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com,ops@yourdomain.com

# Slack Integration (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
# SLACK_CHANNEL=#alerts

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------

# Enable/Disable Features
ENABLE_USER_REGISTRATION=true
ENABLE_GUEST_ACCESS=false
ENABLE_API_DOCUMENTATION=true
ENABLE_HEALTH_CHECKS=true
ENABLE_METRICS_COLLECTION=true

# Advanced Features
ENABLE_AI_TRAINING=false
ENABLE_RESEARCH_MODE=false
ENABLE_EXPERIMENTAL_FEATURES=false

# -----------------------------------------------------------------------------
# INTEGRATION CONFIGURATION
# -----------------------------------------------------------------------------

# EHR Integration (future)
# EHR_SYSTEM_TYPE=epic  # epic, cerner, allscripts
# EHR_API_ENDPOINT=https://api.ehr-system.com
# EHR_API_KEY=your_ehr_api_key
# EHR_CLIENT_ID=your_ehr_client_id
# EHR_CLIENT_SECRET=your_ehr_client_secret

# FHIR Configuration
# FHIR_SERVER_URL=https://fhir.yourdomain.com
# FHIR_VERSION=R4
# FHIR_AUTH_TOKEN=your_fhir_auth_token

# Laboratory Integration
# LAB_SYSTEM_TYPE=labcorp  # labcorp, quest, local
# LAB_API_ENDPOINT=https://api.lab-system.com
# LAB_API_KEY=your_lab_api_key

# -----------------------------------------------------------------------------
# DEVELOPMENT AND TESTING
# -----------------------------------------------------------------------------

# Development Settings (set to false in production)
ENABLE_DEBUG_MODE=false
ENABLE_PROFILING=false
ENABLE_TEST_ENDPOINTS=false

# Testing Configuration
# TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5433/test_nephro_db
# TEST_REDIS_URL=redis://localhost:6380/1

# -----------------------------------------------------------------------------
# CUSTOM CONFIGURATION
# -----------------------------------------------------------------------------

# Organization Settings
ORGANIZATION_NAME=Your Healthcare Organization
ORGANIZATION_LOGO_URL=https://yourdomain.com/logo.png
ORGANIZATION_CONTACT_EMAIL=support@yourdomain.com
ORGANIZATION_PHONE=+1-555-123-4567

# Branding
APP_TITLE=Nephrology AI Agent
APP_DESCRIPTION=Enterprise-grade AI-powered nephrology clinical decision support
APP_FAVICON_URL=https://yourdomain.com/favicon.ico

# Localization
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de
DEFAULT_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# SECURITY CHECKLIST
# -----------------------------------------------------------------------------
# 
# Before deploying to production, ensure:
# 
# ✓ All passwords are strong and unique
# ✓ API keys are valid and have appropriate permissions
# ✓ SSL certificates are properly configured
# ✓ Firewall rules are in place
# ✓ Database backups are configured
# ✓ Monitoring and alerting are set up
# ✓ Log rotation is configured
# ✓ Security headers are enabled
# ✓ Rate limiting is configured
# ✓ CORS settings are restrictive
# ✓ Debug mode is disabled
# ✓ Test endpoints are disabled
# ✓ Audit logging is enabled
# ✓ Data encryption is enabled
# ✓ Regular security updates are scheduled
# 
# =============================================================================